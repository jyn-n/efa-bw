#compdef efa-bw

local stops lines

stops=$(sed 's/^/"/' < /usr/share/efa-bw/stops | sed 's/$/" /' | tr -d '\n')
lines=$(sed 's/$/ /' < /usr/share/efa-bw/lines | tr -d '\n')

local -a args

local curcontext="$curcontext" state line

args=(
	'(-h --help)'{-h,--help}'[display help message]'
	"1:Stops:($stops)"
	'2: :->line'
	'*: :'
)
_arguments -s -S $args

case $state in
line)
	_values -s , 'lines' $(echo $lines)
	;;
esac

